<PlusConfiguration version="1.3">

  <USCalibration>
    <!-- CalibrationMode: OFFLINE or REALTIME -->
    <CalibrationController>
      <ProbeCalibration />

      <SegmentationParameters
          ComputeSegmentationParametersFromPhantomDefinition="1"
          
          MorphologicalOpeningCircleRadiusMm="0.55"
          MorphologicalOpeningBarSizeMm="2.0"

          RegionOfInterest="50 140 600 440"

          MaxLinePairDistanceErrorPercent="10.0"

          MaxAngleDifferenceDegrees="11"
          
          ThresholdImagePercent="10.0"

          CollinearPointsMaxDistanceFromLineMm="1.38"

          UseOriginalImageIntensityForDotIntensityScore="0"
          
          ApproximateSpacingMmPerPixel="0.26"
          ImageScalingTolerancePercent="-10 10 -10 10"                                
          ImageNormalVectorInPhantomFrameEstimation="0 0 1"
          ImageNormalVectorInPhantomFrameMaximumRotationAngleDeg="-30 30 -30 30 -50 50"
          >
      </SegmentationParameters>
    </CalibrationController>
  </USCalibration>

  <PhantomDefinition version="1.1">
    <!-- Supported types are: Double-N, U-Shaped-N -->
    <Description
      Name="iCAL"
      Type="Double-N"
      Version="1.0"
      Institution="Queen's University PerkLab"
    />
    
    <!-- ModelToPhantomTransform - transforming model into phantom coordinate system for proper visualization -->
    <Model
      File="?"
      ModelToPhantomTransform="
        1 0 0 0.0
        0 1 0 0.0
        0 0 1 0.0
        0 0 0 1"
    />

    <Geometry>
      <!-- N wire definitions -->
      <!-- Phantom origin is the inner end of the hole that is on the side of the templete holder, on the side of the triangle shaped hole on the inner part, and closest to the probe -->
      <Pattern Type="NWire" Name="top">
        <Wire Name="wire4" EndPointFront="49.86 54.385 62.05" EndPointBack="49.86 54.385 142.05" />
        <Wire Name="wire5" EndPointFront="39.86 54.385 62.05" EndPointBack="19.86 54.385 142.05" />
        <Wire Name="wire6" EndPointFront="9.86 54.385 62.05" EndPointBack="9.86 54.385 142.05" />
      </Pattern>
      <Pattern Type="NWire" Name="bottom">
        <Wire Name="wire1" EndPointFront="49.86 34.385 62.05" EndPointBack="49.86 34.385 142.05" />
        <Wire Name="wire2" EndPointFront="19.86 34.385 62.05" EndPointBack="39.86 34.385 142.05" />
        <Wire Name="wire3" EndPointFront="9.86 34.385 62.05" EndPointBack="9.86 34.385 142.05" />
      </Pattern>

      <!-- Landmark list for registration -->
      <Landmarks>
        <Landmark Name="?" Position="0.0 0.0 0.0" />
      </Landmarks>
    </Geometry>

    <CustomTransforms TemplateHolderToPhantomTransform="
          1 0 0 5
          0 1 0 63.5
          0 0 1 0
          0 0 0 1"
          
            ImageToPhantomTransform="
          -1  0 0 0
           0  1 0 0
           0  0 -1 0
           0  0 0  1"/>

  </PhantomDefinition>

</PlusConfiguration>
