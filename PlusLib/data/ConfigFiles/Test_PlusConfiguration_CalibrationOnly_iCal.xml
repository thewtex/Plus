<PlusConfiguration version="1.3">

  <DataCollection version="2.0" StartupDelaySec="1.0">

    <Tracker Type="BrachyTracker" BufferSize="1000" Frequency="20" AveragedItemsForFiltering="20" LocalTimeOffset="0.0" SerialPort="3" BaudRate="19200" BrachyStepperType="Burdette Medical Systems Digital Stepper" ModelNumber="4012A18-a" ModelVersion="" ModelSerialNumber="01-50-149" >
      <StepperCalibration AlgorithmVersion="1.0.0" Date="2011.05.02" ProbeTranslationAxisOrientation="0.004635 -0.053440 1" TemplateTranslationAxisOrientation="-0.003557 0.031474 1" Rx="" Ry="" Rx0="" Ry0="" ProbeRotationEncoderScale="1.0" />
      <Tool PortName="0" Name="ProbeHomeToProbe" />
    </Tracker>

    <ImageAcquisition Type="None" />
    <Synchronization Type="None" />
  </DataCollection>

  <CoordinateDefinitions>
    <Transform From="Reference" To="Tracker" Matrix="1 0 0 0   0 1 0 0   0 0 0 1   0 0 0 1" Date="2011.12.02 11:50:00" />
  </CoordinateDefinitions> 

  <Segmentation
    ApproximateSpacingMmPerPixel="0.19"
    MorphologicalOpeningCircleRadiusMm="0.55"
    MorphologicalOpeningBarSizeMm="2.0"
    RegionOfInterest="50 40 600 340" 
    MaxLinePairDistanceErrorPercent="10.0"
    MaxAngleDifferenceDegrees="11"
    MinThetaDegrees="-70"
    MaxThetaDegrees="70"
    AngleToleranceDegrees="11"
    ThresholdImagePercent="10.0"
    CollinearPointsMaxDistanceFromLineMm="1.0"
    UseOriginalImageIntensityForDotIntensityScore="0"
  />

  <iCal version="1.0" NumberOfImagesForValidation="50"    >
    <CalibrationData Type="CALIB_TEMPLATE_TRANSLATION" NumberOfImagesToAcquire="50" FrameTransformNameForValidation="" MaxAllowedTranslationSpeedMmPerSec="10.0" MaxAllowedRotationSpeedDegPerSec="15.0" MinRequiredTranslationDifferenceMm="0.5" MinRequiredAngleDifferenceDeg="5.0"/>
    <CalibrationData Type="CALIB_PROBE_TRANSLATION" NumberOfImagesToAcquire="50" FrameTransformNameForValidation="" MaxAllowedTranslationSpeedMmPerSec="10.0" MaxAllowedRotationSpeedDegPerSec="15.0" MinRequiredTranslationDifferenceMm="0.5" MinRequiredAngleDifferenceDeg="5.0" />
    <CalibrationData Type="CALIB_PROBE_ROTATION" NumberOfImagesToAcquire="100" FrameTransformNameForValidation="" MaxAllowedTranslationSpeedMmPerSec="10.0" MaxAllowedRotationSpeedDegPerSec="15.0" MinRequiredTranslationDifferenceMm="0.5" MinRequiredAngleDifferenceDeg="5.0" />
    <CalibrationData Type="CALIB_RANDOM_STEPPER_MOTION" NumberOfImagesToAcquire="150" FrameTransformNameForValidation="" MaxAllowedTranslationSpeedMmPerSec="10.0" MaxAllowedRotationSpeedDegPerSec="15.0" MinRequiredTranslationDifferenceMm="0.5" MinRequiredAngleDifferenceDeg="5.0" />
  </iCal>

  <PhantomDefinition version="1.1">
    <!-- Supported types are: Double-N, U-Shaped-N -->
    <Description
      Name="iCAL"
      Type="Double-N"
      Version="1.0"
      WiringVersion="1.0"
      Institution="Queen's University PerkLab"
    />

    <Geometry>
      <!-- N wire definitions -->
      <!-- Phantom origin is the inner end of the hole that is on the side of the templete holder, on the side of the triangle shaped hole on the inner part, and closest to the probe -->
      <Pattern Type="NWire" Id="0">
        <Wire Id="1" Name="wire4" EndPointFront="49.86 54.385 62.05" EndPointBack="49.86 54.385 142.05" />
        <Wire Id="2" Name="wire5" EndPointFront="39.86 54.385 62.05" EndPointBack="19.86 54.385 142.05" />
        <Wire Id="3" Name="wire6" EndPointFront="9.86 54.385 62.05" EndPointBack="9.86 54.385 142.05" />
      </Pattern>
      <Pattern Type="NWire" Id="1">
        <Wire Id="4" Name="wire1" EndPointFront="49.86 34.385 62.05" EndPointBack="49.86 34.385 142.05" />
        <Wire Id="5" Name="wire2" EndPointFront="19.86 34.385 62.05" EndPointBack="39.86 34.385 142.05" />
        <Wire Id="6" Name="wire3" EndPointFront="9.86 34.385 62.05" EndPointBack="9.86 34.385 142.05" />
      </Pattern>

      <Landmarks>
        <Landmark Name="?" Position="0.0 0.0 0.0" />
      </Landmarks>
    </Geometry>

    <CustomTransforms TemplateHolderToPhantomTransform="
      1 0 0 5
      0 1 0 63.5
      0 0 1 0
      0 0 0 1"
    />

  </PhantomDefinition>

  <vtkBrachyStepperPhantomRegistrationAlgo
    PhantomCoordinateFrame="Phantom"
    ReferenceCoordinateFrame="Reference"
  />

  <vtkProbeCalibrationAlgo
    ImageCoordinateFrame="Image"
    ProbeCoordinateFrame="Probe"
    PhantomCoordinateFrame="Phantom"
    ReferenceCoordinateFrame="Reference"
    TransducerOriginCoordinateFrame="TransducerOrigin"
    TransducerOriginPixelCoordinateFrame="TransducerOriginPixel"
  />
 
</PlusConfiguration>
