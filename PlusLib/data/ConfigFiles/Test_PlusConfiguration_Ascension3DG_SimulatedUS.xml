<PlusConfiguration version="1.4">

  <DataCollection StartupDelaySec="1.0">
    <DeviceSet 
      Name="Simulation mode for Stylus calibration"
      Description="No Video with Fake tracker in Pivot calibration mode
vtkStylusCalibrationTest uses this configuration" 
    />

  <Tracker Type="Ascension3DG" BufferSize="2500" Frequency="15" LocalTimeOffset="0.0" AveragedItemsForFiltering="20" FilterAcWideNotch="1">
      <Tool Name="Probe" PortName="0"></Tool>
      <Tool Name="Reference" PortName="1"></Tool>
	  <Tool Name="Stylus" PortName="2"></Tool>
    </Tracker>
<ImageAcquisition LocalTimeOffsetSec="0.0" AveragedItemsForFiltering="20" AcquisitionRate="15" BufferSize="100" Type="UsSimulator" UsImageOrientation="MF"/> 

 </DataCollection>



  
    <PlusOpenIGTLinkServer ListeningPort="18944" MaxNumberOfIgtlMessagesToSend="1" MaxTimeSpentWithProcessingMs="10"> 
    <DefaultClientInfo> 
      <MessageTypes> 
        <Message Type="IMAGE" />
        <Message Type="TRANSFORM" />
      </MessageTypes>
      <TransformNames> 
        <Transform Name="ProbeToPhantom" /> 
		<Transform Name="StylusToPhantom" /> 
      </TransformNames>
	  
	 <ImageNames>
		<Image Name="Image" EmbeddedTransformToFrame="Phantom"/>
	  </ImageNames> 
    </DefaultClientInfo>
  </PlusOpenIGTLinkServer>


  <CoordinateDefinitions>
   <Transform
      From="Image" To="Probe"
      Matrix="0.0       0.084     0.0        12.5
              -0.087    0.0       0.0        51.0
              0.0       0.0       0.087      -4.3    
              0         0         0          1"
      Error="1.0" Date="022412_110829" /> 	
      
    <Transform
      From="Reference" To="Phantom" 
      Matrix="-0.0217475 0.0054051 0.999749  -35.3258 
              0.999619 -0.016888  0.021836  -75.1438 
              0.0170018   0.999843 -0.00503578 -24.2369 
              0          0         0          1" 
      Error="0.965947" Date="022412_105333" />
 
  </CoordinateDefinitions>




<vtkUsSimulatorAlgo
    BackgroundValue="155"
    ImageCoordinateFrame="Image"
    ReferenceCoordinateFrame="Phantom"

    NumberOfScanlines="256"
    NumberOfSamplesPerScanline="1000"

    ModelFileName="SpineOnePieceDesign_v01.stl"
    ModelToReferenceTransform="
      1 0 0 0
      0 1 0 0
      0 0 1 0
      0 0 0 1"
  >
	  <RfProcessing>
		<ScanConversion TransducerName="Ultrasonix_L9-4/38"
		  TransducerGeometry="LINEAR"
		  ImagingDepthMm="616.0"
		  TransducerWidthMm="820.0"
		  OutputImageSizePixel="820 616"
		  OutputImageSpacingMmPerPixel="1.0 1.0"        
		  />
		<xScanConversion TransducerName="BK_8848-axial"
		  TransducerGeometry="CURVILINEAR"
		  RadiusStartMm="10.0"
		  RadiusStopMm="60.0"
		  ThetaStartDeg="-70.0"
		  ThetaStopDeg="70.0"
		  OutputImageStartDepthMm="2.0"
		  OutputImageSizePixel="600 400"
		  OutputImageSpacingMmPerPixel="0.15 0.15"        
		  /> 		  
	  </RfProcessing>  
  </vtkUsSimulatorAlgo>
</PlusConfiguration>