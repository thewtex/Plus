<PlusConfiguration version="1.4">

  <DataCollection StartupDelaySec="1.0">
    <DeviceSet 
      Name="TEST Epiphan framegrabber with Fake tracker" 
      Description="Test mode for vtkDataCollectorTest with Epiphan framegrabber and Fake tracker" 
    />

    <Tracker Type="FakeTracker" BufferSize="1000" AcquisitionRate="20" LocalTimeOffset="0.0" Mode="SmoothMove" AveragedItemsForFiltering="20" >
      <Tool Name="Probe" PortName="0" /> 
      <Tool Name="Reference" PortName="1" />
      <Tool Name="MissingTool" PortName="2" /> 
    </Tracker>

    <ImageAcquisition Type="Epiphan" 
      BufferSize="100" 
      AcquisitionRate="30" 
      UsImageOrientation="MF"
      AveragedItemsForFiltering="20"
    />

    <Synchronization Type="None" />

  </DataCollection>

 <CoordinateDefinitions>
    <Transform From="Image" To="Probe"
      Matrix="0.00156166 0.0726639 -0.00948114 11.3389 
      -0.0779562 0.00257007 0.00812248 46.115 
      0.00866095 0.00892904 0.074819 -7.23141 
      0 0 0 1" 
      />
    <Transform From="Phantom" To="Reference" Matrix="0.00898765 -0.0136951 -0.999866 9.59137 0.0246163 -0.9996 0.0139127 36.0012 -0.999657 -0.024738 -0.00864693 87.8909 0 0 0 1" Error="0.404711" Date="012712_152104" />
  </CoordinateDefinitions>
    
  <Rendering WorldCoordinateFrame="Reference">
    <!-- TODO EC9 model and proper transform -->
    <xDisplayableObject Type="Model" ObjectCoordinateFrame="Probe"
      File="L14-5_38_ProbeModel.stl"
      ModelToObjectTransform="
        1 0 0 4.5
        0 -1 0 1.5
        0 0 -1 14
        0 0 0 1"
    />
    <DisplayableObject Type="Image" ObjectCoordinateFrame="Image" />
  </Rendering>

  <fCal
    NumberOfStylusCalibrationPointsToAcquire="200"
    ImageCoordinateFrame="Image"
    ProbeCoordinateFrame="Probe"
    ReferenceCoordinateFrame="Reference"
    TransducerOriginCoordinateFrame="TransducerOrigin"
    TransducerOriginPixelCoordinateFrame="TransducerOriginPixel"
  />

</PlusConfiguration>
