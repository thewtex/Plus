@ECHO off
REM Hide all your directories from users

SET ORIGPATH=%PATH%

SET DIRCMD=0 
SET PATH=${VTK_DIR}/bin/Release;${ITK_DIR}/bin/Release;%PATH%
IF "${PLUS_USE_CERTUS}"=="ON" SET PATH=${NDIOAPI_BINARY_DIR};%PATH% ELSE ( 
    IF "${PLUS_USE_POLARIS}"=="ON" SET PATH=${NDIOAPI_BINARY_DIR};%PATH% )
IF "${PLUS_USE_ICCAPTURING_VIDEO}"=="ON" SET PATH=${ICCAPTURING_BIN_DIR}/release;%PATH%
IF "${ULTERIUS_MAJOR_VERSION}"=="1" SET PATH=${ULTERIUS_BINARY_DIR}/r;%PATH% ELSE (
  SET PATH=${ULTERIUS_BINARY_DIR};%PATH%)
IF "${PLUS_USE_OpenIGTLink}"=="ON" SET PATH=${OpenIGTLink_DIR}/bin/Release;%PATH%
SET PATH=${QT_BINARY_DIR};%PATH%
SET SVNCOMMAND=${Subversion_SVN_EXECUTABLE}

if "%1" == "" goto experimental
if "%1" == "-E" goto experimental
if "%1" == "-N" goto nightly
if "%1" == "-C" goto continuous
if "%1" == "-I" goto individual

:experimental
"${CMAKE_CTEST_COMMAND}" -D Experimental
goto END

:nightly
@REM Clean before the nightly build to enforce all build warnings appear on all nightly dashboard submissions
"${CMAKE_MAKE_PROGRAM}" PlusLib.sln /clean Release /project ALL_BUILD
"${CMAKE_CTEST_COMMAND}" -D Nightly
goto END

:continuous
"${CMAKE_CTEST_COMMAND}" -D Continuous
goto END

:individual 
@REM Run individual tests with regexp search 
@REM Display the list of tests
"${CMAKE_CTEST_COMMAND}" -R "%2" -N
@REM Run selected tests
"${CMAKE_CTEST_COMMAND}" -R "%2"
goto END


:END
SET PATH=%ORIGPATH%
ECHO DONE
